<div class="post-create-container">
	<h2>Create a Post</h2>

	<!-- Form -->
	<form [formGroup]="this.form" (ngSubmit)="submit()">
		<div class="form-field">
			<label for="body">Post Content</label>
			<textarea
					id="body"
					formControlName="body"
					rows="6"
					placeholder="Write your post here..."
					[class.is-invalid]="this.form.get('body')?.invalid && this.form.get('body')?.touched"
			>
      </textarea>

			<!-- Validation messages -->
			@if (this.form.get('body')?.touched && this.form.get('body')?.invalid) {
				<div class="validation-errors">
					@if (this.form.get('body')?.errors?.['required']) {
						<p>Post content is required.</p>
					} @else if (this.form.get('body')?.errors?.['minlength']) {
						<span>Minimum length is {{ this.form.get('body')?.errors?.['minlength']?.requiredLength }} characters.</span>
					}
				</div>
			}
		</div>

		<button type="submit" [disabled]="this.form.invalid || this.creating">
			{{ this.creating ? 'Creating...' : 'Create' }}
		</button>

		<button type="button" class="btn btn-three mt-3" (click)="onCancel()" [disabled]="this.creating">
			Cancel
		</button>

		<!-- Error message -->
		@if (this.error) {
			<p style="color:#b00020">{{ this.error }}</p>
		}
	</form>
</div>