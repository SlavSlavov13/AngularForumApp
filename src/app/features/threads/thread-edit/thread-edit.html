<section class="container">
	<h1>Edit Thread</h1>

	@if (loading) {
		<p>Loading…</p>
	} @else if (error) {
		<p class="error">{{ error }}</p>
	} @else {
		<form [formGroup]="form" (ngSubmit)="submit()" novalidate>
			<!-- Title -->
			<label for="title">Title</label>
			<input id="title" type="text" formControlName="title"/>
			@if (form.controls['title'].touched && form.controls['title'].invalid) {
				<small class="error">
					@if (form.controls['title'].errors?.['required']) {
						Title is required.
					}
					@if (form.controls['title'].errors?.['minlength']) {
						Title must be at least 6 characters.
					}
				</small>
			}

			<!-- Body -->
			<label for="body">Body</label>
			<textarea id="body" formControlName="body" rows="8"></textarea>
			@if (form.controls['body'].touched && form.controls['body'].invalid) {
				<small class="error">
					@if (form.controls['body'].errors?.['required']) {
						Body is required.
					}
					@if (form.controls['body'].errors?.['minlength']) {
						Body must be at least 20 characters.
					}
				</small>
			}

			<!-- Tags -->
			<label for="tags">Tags</label>
			<input id="tags" type="text" formControlName="tags" placeholder="comma,separated,tags"/>

			<!-- Submit -->
			<button type="submit" [disabled]="form.invalid || saving">
				@if (!saving) {
					Save
				} @else {
					Saving…
				}
			</button>
		</form>
	}
</section>
